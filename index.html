<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WeBo Shop</title>

<style>
body{font-family:Arial,sans-serif;background:#f5f5f5;margin:0;padding:0}
header{background:#232f3e;color:white;padding:15px;text-align:center;font-size:24px}
.container{display:flex;flex-wrap:wrap;justify-content:center;margin:20px}
.product{background:white;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.2);margin:10px;padding:10px;width:220px;text-align:center;transition:transform 0.2s}
.product:hover{transform:scale(1.05)}
.product img{width:200px;height:200px;object-fit:cover;border-radius:5px}
button{padding:8px 12px;margin-top:5px;background:#ffd814;border:none;border-radius:5px;cursor:pointer;font-weight:bold}
button:hover{background:#f7ca00}
#cartContainer{position:fixed;top:60px;right:20px;background:white;padding:15px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.3);width:300px;max-height:80vh;overflow:auto;display:none;z-index:10}
#cartContainer h3{margin-top:0;text-align:center}
#cartContainer p{margin:5px 0}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);justify-content:center;align-items:center;z-index:20}
.modal-content{background:white;padding:20px;border-radius:10px;width:90%;max-width:500px;text-align:center}
.modal-content img{width:300px;height:300px;object-fit:cover;border-radius:5px}
</style>

<!-- SDK PAYPAL -->
<script src="https://www.paypal.com/sdk/js?client-id=TON_CLIENT_ID_ICI&currency=EUR"></script>

</head>
<body>

<header>ðŸ›’ WeBo Shop</header>

<button onclick="toggleCart()" style="position:fixed;top:15px;right:20px;padding:10px 15px;">Voir Panier</button>

<div id="cartContainer">
<h3>Panier</h3>
<div id="cartList"></div>
<p><b>Total: <span id="cartTotal">0.00</span>â‚¬</b></p>

<div id="paypal-button-container"></div>

<button onclick="clearCartUI()">Vider Panier</button>
</div>

<div class="container" id="productList"></div>

<div class="modal" id="productModal">
<div class="modal-content">
<h2 id="modalName"></h2>
<img id="modalImg" src="">
<p id="modalPrice"></p>
<p id="modalStock"></p>
<p id="modalPayment"></p>
<button onclick="addToCartModal()">Ajouter au panier</button>
<button onclick="closeModal()">Fermer</button>
</div>
</div>

<script>

// PRODUITS (Ketupat supprimÃ© + Swaggy Bros ajoutÃ©)

const products = [
{id:1,name:"Eviledon 157m",price:1.50,stock:1,img:"https://via.placeholder.com/200?text=Eviledon+157m"},
{id:2,name:"Eviledon 189m",price:1.50,stock:1,img:"https://via.placeholder.com/200?text=Eviledon+189m"},
{id:3,name:"Orcaledon 40m",price:1.50,stock:1,img:"https://via.placeholder.com/200?text=Orcaledon+40m"},
{id:4,name:"Nuclearo Radio",price:4,stock:1,img:"https://via.placeholder.com/200?text=Nuclearo+Radio"},
{id:5,name:"Nuclearo Rnbw",price:4,stock:1,img:"https://via.placeholder.com/200?text=Nuclearo+Rnbw"},
{id:6,name:"Nuclearo YingYang",price:4,stock:1,img:"https://via.placeholder.com/200?text=Nuclearo+YingYang"},
{id:7,name:"Nuclearo Lava",price:4,stock:1,img:"https://via.placeholder.com/200?text=Nuclearo+Lava"},
{id:8,name:"Nuclearo Skibidi",price:4,stock:1,img:"https://via.placeholder.com/200?text=Nuclearo+Skibidi"},
{id:9,name:"Ginger Sekolah 75m",price:2,stock:2,img:"https://via.placeholder.com/200?text=Ginger+Sekolah"},
{id:10,name:"Mariachi Rnbw 125m",price:3,stock:1,img:"https://via.placeholder.com/200?text=Mariachi+Rnbw"},
{id:11,name:"Tacorita 107m",price:4,stock:1,img:"https://via.placeholder.com/200?text=Tacorita"},
{id:12,name:"Baccuru 576m",price:3.50,stock:1,img:"https://via.placeholder.com/200?text=Baccuru"},
{id:13,name:"Rosetti Toiletti 300m",price:2.50,stock:1,img:"https://via.placeholder.com/200?text=Rosetti+Toiletti"},
{id:14,name:"Spaghetti Toiletti 615m",price:4,stock:1,img:"https://via.placeholder.com/200?text=Spaghetti+Toiletti"},
{id:15,name:"Money Puggy 126m",price:2,stock:1,img:"https://via.placeholder.com/200?text=Money+Puggy+126"},
{id:16,name:"Money Puggy 273m",price:3,stock:1,img:"https://via.placeholder.com/200?text=Money+Puggy+273"},
{id:17,name:"Swaggy Bros 600m",price:6,stock:1,img:"https://via.placeholder.com/200?text=Swaggy+Bros+600m"}
];

let cart = [];

const productList = document.getElementById("productList");

products.forEach(p=>{
  const div = document.createElement("div");
  div.className="product";
  div.innerHTML=`
    <img src="${p.img}">
    <h3>${p.name}</h3>
    <p>${p.price}â‚¬</p>
    <p>Stock: ${p.stock}</p>
    <button onclick="openModal(${p.id})">Voir / Ajouter</button>
  `;
  productList.appendChild(div);
});

function toggleCart(){
  const cartDiv=document.getElementById("cartContainer");
  cartDiv.style.display = cartDiv.style.display==="none"?"block":"none";
  updateCart();
}

function openModal(id){
  const p=products.find(prod=>prod.id===id);
  document.getElementById("modalName").innerText=p.name;
  document.getElementById("modalImg").src=p.img;
  document.getElementById("modalPrice").innerText="Prix: "+p.price+"â‚¬";
  document.getElementById("modalStock").innerText="Stock: "+p.stock;
  document.getElementById("modalPayment").innerText="Paiement: PayPal";
  document.getElementById("productModal").style.display="flex";
  window.currentModalId=id;
}

function closeModal(){document.getElementById("productModal").style.display="none";}

function addToCartModal(){
  const id=window.currentModalId;
  const item=cart.find(c=>c.id===id);
  if(item){item.qty++;}else{cart.push({id:id,qty:1});}
  updateCart();
  closeModal();
}

function updateCart(){
  const list=document.getElementById("cartList");
  const totalEl=document.getElementById("cartTotal");
  list.innerHTML="";
  let total=0;
  cart.forEach(item=>{
    const p=products.find(prod=>prod.id===item.id);
    list.innerHTML+=`<p>${p.name} x${item.qty} - ${(p.price*item.qty).toFixed(2)}â‚¬</p>`;
    total+=p.price*item.qty;
  });
  totalEl.innerText=total.toFixed(2);
}

function clearCartUI(){
  cart=[];
  updateCart();
}

paypal.Buttons({
  createOrder:function(data,actions){
    let total=0;
    cart.forEach(item=>{
      const p=products.find(prod=>prod.id===item.id);
      total+=p.price*item.qty;
    });
    if(total<=0){alert("Panier vide !");return;}
    return actions.order.create({
      purchase_units:[{
        amount:{value:total.toFixed(2)}
      }]
    });
  },
  onApprove:function(data,actions){
    return actions.order.capture().then(function(details){
      alert("Paiement rÃ©ussi ! Merci "+details.payer.name.given_name);
      clearCartUI();
    });
  }
}).render('#paypal-button-container');

</script>

</body>
</html>
